$(function () {
        
//    var $input = $('#indicators-date').pickadate(configCalendar);
//    var picker = $input.pickadate('picker');
//    
//    $('body').on('click', '.btn-filter-calendar', function (e) {
//        e.preventDefault();
//        if (picker.get('open')) {
//            picker.close();
//        } else {
//            picker.open();
//        }                        
//        e.stopPropagation();
//        
//    });
//                
//    picker.on({
//        open: function() {
//          console.log('Opened up!');
//        },
//        close: function() {
//          console.log('Closed now');
//        },
//        render: function() {
//          console.log('Just rendered anew');
//        },
//        stop: function() {
//          console.log('See ya');
//        },
//        set: function(thingSet) {
//          console.log('Set stuff:', thingSet);
//        }
//      });
     
    
    var chart; 
    Highcharts.setOptions({
        lang: {
            thousandsSep: ','
        }
    });
    
    // Make monochrome colors
    var colorStates = (function () {
        var colors = [],
                base = '#312691',                
                i;
        
        for (i = 0; i < 10; i += 1) {
            // Start out with a darkened base color (negative brighten), and end
            // up with a much brighter color
            colors.push(Highcharts.Color(base).brighten((i - 3) / 7).get());
        }
        return colors;
    }());
     
    function dataStates() {
        var formElement = document.querySelector(".form-filter-indicators");
        var form = new FormData(formElement);  
        
        $.ajax({
            url: SITEURL + "/indicators/getChart",
            async: false,
            dataType: 'json',
            type: 'POST',
            data: form,
            processData: false,
            contentType: false,
            success: function (result) {
                //if (result.status == "success") {
                    chart = Highcharts.chart('canvas', {
                            chart: {
                                plotBackgroundColor: null,
                                plotBorderWidth: null,
                                plotShadow: false,
                                type: 'pie',
                            },        
                            legend: {
                                align: 'left',
                                verticalAlign: 'top',
                                layout: 'vertical',
                                itemDistance: 100,
                                x: 0,
                                y: 130,
                                itemStyle: {
                                    "fontWeight": 'normal',
                                }
                            },
                            title: {
                                text: result.title,            
                                align: 'left',
                                verticalAlign: 'top',
                                x: 25,
                                y: 15,
                                style: {
                                    "fontSize": "14px",
                                    "fontWeight": 'bold'
                                },                                
                            },
                            tooltip: {
                                useHTML: true,
                                pointFormat: '<b>$ {point.y:,.0f}</b><br>'+
                                             '%{point.percentage:.1f}<br>'+
                                             '<span><i class="feather feather-user"></i> {point.cant}</span>'
                            },
                            plotOptions: {
                                pie: {
                                    allowPointSelect: true,
                                    cursor: 'pointer',
                                    colors: colorStates,
                                    dataLabels: {
                                        enabled: false,
                                        align: 'left',
                                    },
                                    showInLegend: true
                                }
                            },
                            series: [{
                                    animation: {
                                        duration: 3500
                                    },
                                    name: 'Brands',
                                    colorByPoint: true,
                                    data: result.data
                                }]
                        });        
                    //}
            }
        });
    }
       
    dataStates();
    
    // Make monochrome colors
    var colorsRegions = (function () {
//                base = '#f7a35c' 8=> rojo,                
//                base = Highcharts.getOptions().colors[10],                
        var colors = [],
                base = '#FF4C13',                
                i;
//        console.log(base);
        for (i = 0; i < 10; i += 1) {
            // Start out with a darkened base color (negative brighten), and end
            // up with a much brighter color
            colors.push(Highcharts.Color(base).brighten((i - 3) / 7).get());
        }
        return colors;
    }());
    
    function dataRegions() {
        var formElement = document.querySelector(".form-filter-indicators");
        var form = new FormData(formElement);  
        
        $.ajax({
            url: SITEURL + "/indicators/getChartRegions",
            async: false,
            dataType: 'json',
            type: 'POST',
            data: form,
            processData: false,
            contentType: false,
            success: function (result) {
                //if (result.status == "success") {
                    chart = Highcharts.chart('canvas-4', {
                            chart: {
                                plotBackgroundColor: null,
                                plotBorderWidth: null,
                                plotShadow: false,
                                type: 'pie',
                            },        
                            legend: {
                                align: 'left',
                                verticalAlign: 'top',
                                layout: 'vertical',
                                itemDistance: 110,
                                x: 0,
                                y: 130,
                                itemStyle: {
                                    "fontWeight": 'normal',
                                }
                            },
                            title: {
                                text: result.title,            
                                align: 'left',
                                verticalAlign: 'top',
                                x: 25,
                                y: 15,
                                style: {
                                    "fontSize": "13px",
                                    "fontWeight": 'bold'
                                },   
                            },
                            tooltip: {
                                useHTML: true,
                                pointFormat: '<b>$ {point.y:,.0f}</b><br>'+
                                             '%{point.percentage:.1f}<br>'+
                                             '<span><i class="feather feather-user"></i> {point.cant}</span>'
                            },
                            plotOptions: {
                                pie: {
                                    allowPointSelect: true,
                                    cursor: 'pointer',
                                    colors: colorsRegions,
                                    dataLabels: {
                                        enabled: false,
                                        align: 'left',
                                    },
                                    showInLegend: true
                                }
                            },
                            series: [{
                                    name: 'Brands',
                                    colorByPoint: true,
                                    data: result.data
                                }]
                        });        
                    //}
            }
        });
    }
    
    dataRegions();
    
    // Make monochrome colors
    var colorsType = (function () {
        var colors = [],
                base = '#90ed7d',                
                i;
        
        for (i = 0; i < 10; i += 1) {
            // Start out with a darkened base color (negative brighten), and end
            // up with a much brighter color
            colors.push(Highcharts.Color(base).brighten((i - 3) / 7).get());
        }
        return colors;
    }());
    
    function dataType() {
        var formElement = document.querySelector(".form-filter-indicators");
        var form = new FormData(formElement);  
        
        $.ajax({
            url: SITEURL + "/indicators/getChartType",
            async: false,
            dataType: 'json',
            type: 'POST',
            data: form,
            processData: false,
            contentType: false,
            success: function (result) {
                //if (result.status == "success") {
                    chart = Highcharts.chart('canvas-2', {
                            chart: {
                                plotBackgroundColor: null,
                                plotBorderWidth: null,
                                plotShadow: false,
                                type: 'pie',
                            },        
                            legend: {
                                align: 'left',
                                verticalAlign: 'top',
                                layout: 'vertical',
                                itemDistance: 100,
                                x: 0,
                                y: 130,
                                itemStyle: {
                                    "fontWeight": 'normal',
                                }
                            },
                            title: {
                                text: result.title,            
                                align: 'left',
                                verticalAlign: 'top',
                                x: 25,
                                y: 15,
                                style: {
                                    "fontSize": "14px",
                                    "fontWeight": 'bold'
                                }, 
                            },
                            tooltip: {
                                useHTML: true,
                                pointFormat: '<b>$ {point.y:,.0f}</b><br>'+
                                             '%{point.percentage:.1f}<br>'+
                                             '<span><i class="feather feather-user"></i> {point.cant}</span>'
                            },
                            plotOptions: {
                                pie: {
                                    allowPointSelect: true,
                                    cursor: 'pointer',
                                    colors: colorsType,
                                    dataLabels: {
                                        enabled: false,
                                        align: 'left',
                                    },
                                    showInLegend: true
                                }
                            },
                            series: [{
                                    animation: {
                                        duration: 3500
                                    },
                                    name: 'Brands',
                                    colorByPoint: true,
                                    data: result.data
                                }]
                        });        
                    //}
            }
        });
    }
    
    dataType();
    
    // Make monochrome colors
    var colorsProperty = (function () {
        var colors = [],
                base = '#FFD800',                
                //base = Highcharts.getOptions().colors[6],                
                i;
        //console.log(base);
        //#7cb5ec
        for (i = 0; i < 10; i += 1) {
            // Start out with a darkened base color (negative brighten), and end
            // up with a much brighter color
            colors.push(Highcharts.Color(base).brighten((i-1) / 7).get());
        }
        return colors;
    }());
        
    function dataProperty() {
        var formElement = document.querySelector(".form-filter-indicators");
        var form = new FormData(formElement);  
        
        $.ajax({
            url: SITEURL + "/indicators/getChartTest",
            async: false,
            dataType: 'json',
            type: 'POST',
            data: form,
            processData: false,
            contentType: false,
            success: function (result) {
                //if (result.status == "success") {
                    chart = Highcharts.chart('canvas-5', {
                            chart: {
                                plotBackgroundColor: null,
                                plotBorderWidth: null,
                                plotShadow: false,
                                type: 'pie',
                            },        
                            legend: {
                                align: 'left',
                                verticalAlign: 'top',
                                layout: 'vertical',
                                itemDistance: 100,
                                x: 0,
                                y: 130,
                                itemStyle: {
                                    "fontWeight": 'normal',
                                }
                            },
                            title: {
                                text: result.title,            
                                align: 'left',
                                verticalAlign: 'top',
                                x: 25,
                                y: 15,
                                style: {
                                    "fontSize": "14px",
                                    "fontWeight": 'bold'
                                }, 
                            },
                            tooltip: {
                                useHTML: true,
                                pointFormat: '<b>$ {point.y:,.0f}</b><br>'+
                                             '%{point.percentage:.1f}<br>'+
                                             '<span><i class="feather feather-user"></i> {point.cant}</span>'
                            },
                            plotOptions: {
                                pie: {
                                    allowPointSelect: true,
                                    cursor: 'pointer',
                                    colors: colorsProperty,
                                    dataLabels: {
                                        enabled: false,
                                        align: 'left',
                                    },
                                    showInLegend: true
                                }
                            },
                            series: [{
                                    animation: {
                                        duration: 3500
                                    },
                                    name: 'Brands',
                                    colorByPoint: true,
                                    data: result.data
                                }]
                        });        
                    //}
            }
        });
    }
    
    dataProperty();
    
    function dataYear() {
        var formElement = document.querySelector(".form-filter-indicators");
        var form = new FormData(formElement);  
        
        $.ajax({
            url: SITEURL + "/indicators/getChartYear",
            async: false,
            dataType: 'json',
            type: 'POST',
            data: form,
            processData: false,
            contentType: false,
            success: function (result) {
                //if (result.status == "success") {
                    chart = Highcharts.chart('canvas-6', {
                            chart: {
                                plotBackgroundColor: null,
                                plotBorderWidth: null,
                                plotShadow: false,
                                type: 'pie',
                            },        
                            legend: {
                                align: 'left',
                                verticalAlign: 'top',
                                layout: 'vertical',
                                itemDistance: 110,
                                x: 0,
                                y: 130,
                                itemStyle: {
                                    "fontWeight": 'normal',
                                }
                            },
                            title: {
                                text: result.title,            
                                align: 'left',
                                verticalAlign: 'top',
                                x: 25,
                                y: 15,
                                style: {
                                    "fontSize": "13px",
                                    "fontWeight": 'bold'
                                },   
                            },
                            tooltip: {
                                useHTML: true,
                                pointFormat: '<b>$ {point.y:,.0f}</b><br>'+
                                             '%{point.percentage:.1f}<br>'+
                                             '<span><i class="feather feather-user"></i> {point.cant}</span>'
                            },
                            plotOptions: {
                                pie: {
                                    allowPointSelect: true,
                                    cursor: 'pointer',
                                    colors: colorsRegions,
                                    dataLabels: {
                                        enabled: false,
                                        align: 'left',
                                    },
                                    showInLegend: true
                                }
                            },
                            series: [{
                                    name: 'Brands',
                                    colorByPoint: true,
                                    data: result.data
                                }]
                        });        
                    //}
            }
        });
    }
    
    dataYear();
    
    function hideCredits() {        
            $('.highcharts-credits').fadeOut('slow');
    }
        
    setTimeout(function(){
        hideCredits();    
    },500);
    
    $('body').on('change', '.form-indicators', function (e) {
        e.preventDefault();
        dataStates();
        dataRegions();
        dataType();
        dataProperty();
        dataYear();
        hideCredits();
//        dataModalities();
    });
        

});
$(window).on('load', function() {
    setTimeout(function(){
        $('#m-indicators').trigger('click');
        console.log('t');
    },300);
});


