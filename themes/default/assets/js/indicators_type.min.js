$(function () {
    
     var chart;
          
     function dataType() {
        var formElement = document.querySelector(".form-filter-indicators");
        var form = new FormData(formElement);  
        
        $.ajax({
            url: SITEURL + "/indicators/getChartType",
            async: false,
            dataType: 'json',
            type: 'POST',
            data: form,
            processData: false,
            contentType: false,
            success: function (result) {
                //if (result.status == "success") {
                    chart = Highcharts.chart('canvas-2', {
                            chart: {
                                plotBackgroundColor: null,
                                plotBorderWidth: null,
                                plotShadow: false,
                                type: 'pie',
                            },        
                            legend: {
                                align: 'left',
                                verticalAlign: 'top',
                                layout: 'vertical',
                                itemDistance: 100,
                                x: 0,
                                y: 130,
                                itemStyle: {
                                    "fontWeight": 'normal',
                                }
                            },
                            title: {
                                text: result.title,            
                                align: 'left',
                                verticalAlign: 'top',
                                x: 25,
                                y: 105,
                                style: {
                                    "fontSize": "12px",
                                    "fontWeight": 'bold'
                                }, 
                            },
                            tooltip: {
                                useHTML: true,
                                pointFormat: '<b>$ {point.y:,.0f}</b><br>'+
                                             '%{point.percentage:.1f}<br>'+
                                             '<span><i class="feather feather-user"></i> {point.cant}</span>'
                            },
                            plotOptions: {
                                pie: {
                                    allowPointSelect: true,
                                    cursor: 'pointer',
                                    colors: pieColors,
                                    dataLabels: {
                                        enabled: false,
                                        align: 'left',
                                    },
                                    showInLegend: true
                                }
                            },
                            series: [{
                                    animation: {
                                        duration: 3500
                                    },
                                    name: 'Brands',
                                    colorByPoint: true,
                                    data: result.data
                                }]
                        });        
                    //}
            }
        });
    }
    
    // Make monochrome colors
    var pieColors = (function () {
        var colors = [],
                base = '#90ed7d',                
                i;
        
        for (i = 0; i < 10; i += 1) {
            // Start out with a darkened base color (negative brighten), and end
            // up with a much brighter color
            colors.push(Highcharts.Color(base).brighten((i - 3) / 7).get());
        }
        return colors;
    }());

   Highcharts.setOptions({
        lang: {
            thousandsSep: ','
        }
    });

   
    dataType();
    
});


