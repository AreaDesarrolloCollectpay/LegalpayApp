$(function () {
    setTimeout(function(){
        $('#m-customers').addClass('active');
    },450);
    
    // btn create invoice

        $('body').on('click', '.createInvoice', function (e) {
            e.preventDefault();
            var _this = $(this);
            $(".form-invoices")[0].reset();
            $("#invoice-idUser").val(_this.attr('data-idUser'));        
            $("#invoice-id").val('');        
        });

    //  form update User

    $('body').on('submit', '.form-invoices', function (e) {
        e.preventDefault();
        var form = new FormData(this);
        $.ajax({
            url: SITEURL + "/users/updateInvoices",
            dataType: 'json',
            type: 'POST',
            data: form,
            processData: false,
            contentType: false,
            beforeSend: function () {
                $(".preload").fadeIn(300);
            },
            success: function (result) {
                $(".preload").fadeOut(300);
                toastr[result.status](result.msg);
                if (result.status == "success") {
                    $('.clear').val('');
                    $('.modal-close').click();
                    setTimeout(function(){
                        location.reload();
                    },800);
                }
            }
        });
    });
            
    // update Customers
    
    $('body').on('click', '.editInvoices', function (e) {
        e.preventDefault();
        var _this = $(this);
        var element = "#"+_this.attr("data-element");
        $.ajax({
            url: SITEURL + "/users/getInvoice",
            dataType: 'json',
            type: 'POST',
            data: {id : _this.attr("data-id")},
            success: function (result) {
                if (result.status == "success"){                    
                    $.each(result.model,function(index, value){
                        if($(element+index).attr('type') != 'file'){
                            $(element+index).val(value);                            
                        }
                    });                    
                }else{
                    toastr[result.status](result.msg);
                    
                }
            }
        });

    });

});


