$(function () {
    
    setTimeout(function(){
        $('#m-settings').trigger('click');
    },650);

    //  form profile update User

    $('body').on('submit', '.form-currency', function (e) {
        e.preventDefault();
        var form = new FormData(this);
        $.ajax({
            url: SITEURL + "/settings/updateCurrency",
            dataType: 'json',
            type: 'POST',
            data: form,
            processData: false,
            contentType: false,
            beforeSend: function () {
                $(".preload").fadeIn(300);
            },
            success: function (result) {
                $(".preload").fadeOut(300);
                toastr[result.status](result.msg);
                if (result.status == "success") {
                    location.reload();
                }
            }
        });
    });
    
    // update Currency
    
    $('body').on('click', '.editCurrency', function (e) {
        e.preventDefault();
        var _this = $(this);
        var element = "#"+_this.attr("data-element");
        $.ajax({
            url: SITEURL + "/settings/getCurrency",
            dataType: 'json',
            type: 'POST',
            data: {id : _this.attr("data-id")},
            success: function (result) {
                if (result.status == "success") {                    
                    $(element+'name').val(result.model.name);
                    $(element+'currency').val(result.model.currency); 
                    $(element+'value').val(result.model.value);
                    $(element+'id').val(result.model.id);                    
                }else{
                    toastr[result.status](result.msg);
                    
                }
            }
        });

    });
    
});


