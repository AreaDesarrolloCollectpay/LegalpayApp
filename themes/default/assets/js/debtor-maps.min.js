$(function () {
    
    $('body').on('click', '#btnGMaps', function (e) { 
        e.preventDefault();
        setTimeout(function () {
            $('#google_maps_picker').openModal();
        }, 200);
    });
    
    var myLatlng = new google.maps.LatLng(4.710989, -74.072092);
    var mapOptions = {
        zoom: 13,
        fullscreenControl: false,
        center: myLatlng
    };
    var map = new google.maps.Map(document.getElementById('map-canvas-modal'), mapOptions);
    var marker;
    var infowindow;
    
    $.ajax({
        url: SITEURL + "/wallet/getDebtorMarker",
        dataType: 'json',
        type: 'POST',
        data: {id : $("#idDebtor").val()},            
        success: function (result) {            
            if(result.status == 'success'){ 
               map.setCenter({lat:parseFloat(result.model.address_lat), lng:parseFloat(result.model.address_lng)});
               var style = 'color:#131313;font-weight:bold';
               var contentString = '<div class="infowindows">'+
                '<p><span style="'+style+'">'+result.model.name+'</span></p>'+
                '<p><span style="'+style+'">CC / NIT :</span> '+result.model.code+'</p>'+
                '<p><span style="'+style+'">Direcci√≥n :</span> '+result.model.address+'</p>'+
            '</div>';
               infowindow = new google.maps.InfoWindow({
                    content: contentString,
                    disableAutoPan: true
                 });
               marker = new google.maps.Marker({
                    position:  new google.maps.LatLng(parseFloat(result.model.address_lat), parseFloat(result.model.address_lng)),
                    map: map,
                });
                google.maps.event.addListener(marker, 'click', function() {
                    infowindow.open(map, marker);
                  });
            }
        }
    });

    
});


